{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shop-refs.js","../src/js/shop-icons-path.js","../src/js/shopping-list.js"],"sourcesContent":["export default function () {\n    return {\n        // Shopping list\n    divEl: document.querySelector('.filled-basket'),\n    addBtnEL: document.querySelector('.shop_card-btn'),\n       // Paginations\n    }\n}","export default function () {\n    return {\n      // Online stores icons\n    \n      bookShopIconPath: new URL('../img/modal/book.png', import.meta.url).href,\n  \n      amazonIconPath: new URL('../img/modal/amazon.png', import.meta.url).href,\n  \n       // Empty list image\n      emptyListImage: new URL('../img/shopping/books-desk@1x.png', import.meta.url).href,\n  \n      // SVG\n      svgTrashIcon: new URL('../img/icons.svg', import.meta.url),\n    };\n  }","import icons from \"../img/icons.svg\"\nimport getRefs from './shop-refs.js';\nimport getShopIconsPaths from './shop-icons-path.js';\n\nconst SHOPPING_LIST_STORAGE_KEY = 'books';\nconst shoppingList = JSON.parse(localStorage.getItem(SHOPPING_LIST_STORAGE_KEY)) || [];\nconst blankBasket = document.querySelector('.blank-basket')\n\n\n\nconst { divEl, \n    previousButton, \n    paginationPagesStart,  \n  } = getRefs(); {\n\n}\nconst {\n    bookShopIconPath,\n    amazonIconPath,\n    // svgTrashIcon,\n  } = getShopIconsPaths();\n\n  /* const blankBasket = document.querySelector('.blank-basket') */\n\n\nconst pageSize = 3;\nlet currentPage = 1;\nlet startIndex = (currentPage - 1) * pageSize;\nlet endIndex = startIndex + pageSize;\nlet itemsOnPage = shoppingList.slice(startIndex, endIndex);\n\nfunction renderMarkUp(storageArr) {\n    return storageArr\n        .map(\n            ({\n                _id,\n                title,\n                author,\n                description,\n                list_name,\n                book_image,\n                amazon_product_url,\n                // buy_links,\n            }) => {\n                return `\n                <article class=\"shop_card\">\n                    <div class=\"card-img\">\n                        <img class=\"shop__card-img\" src=\"${book_image}\" alt=\"${title}\" />\n                    </div>\n\n                    <div class=\"card-title\">\n                        <h3 class=\"shop__book-title\">${title}</h3>\n                        <p class=\"shop__book-category\">${list_name}</p>\n                    </div>\n\n                    <div class=\"card-description\">\n                        <p class=\"shop__book-description\">${description}</p>\n                    </div>\n\n                    <div class=\"card-author\">\n                        <p class=\"shop__book-author\">${author}</p>\n                    </div>\n\n                    <div class=\"card-shoplist\">\n                        <ul class=\"shop__book-shoplist\">\n                            <li class=\"store\">\n                                <a href=\"${amazon_product_url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"Amazon link\">\n                                    <img class=\"modal-shop-img shopping-shopimg amazon\" src=\"${amazonIconPath}\" alt=\"Amazon link\" alt=\"Amazon live page\"/>\n                                </a>\n                            </li>\n                            <li class=\"store\">\n                                <a href=\"${amazon_product_url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"BookShop link\">\n                                    <img class=\"modal-shop-img shopping-shopimg book-shop\" src=\"${bookShopIconPath}\" alt=\"BookShop link\" />\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                    <button class=\"shop_card-btn\" type=\"button\" data-book-id=\"${_id}\" aria-label=\"Remove book from shopping list\">\n                        <svg class=\"trash-icon\" data-book-id=\"${_id}\" width=\"17\" height=\"17\">\n                            <use href=\"${icons}#trash-icon\"></use>\n                        </svg>\n                    </button>\n                </article>\n                `;\n            }\n        )\n        .join('');\n}\n\nfunction isEmpty() {\n    if (!shoppingList.length) {\n        blankBasket.classList.remove('display-none');\n    return;\n    }\ndivEl.insertAdjacentHTML('beforeend', renderMarkUp(itemsOnPage));\n}\nisEmpty();\n\ndivEl.addEventListener('click', event => {\n    if (event.target.closest('.shop_card-btn')) {\n        const BookID = event.target.getAttribute('data-book-id');\n\n        const bookIndex = shoppingList.findIndex(\n            bookInStorage => bookInStorage._id === BookID\n        );\n\n        shoppingList.splice(bookIndex, 1);\n\n        localStorage.setItem(\n            SHOPPING_LIST_STORAGE_KEY,\n            JSON.stringify(shoppingList)\n        );\n\n        if (!shoppingList.length) {\n            divEl.innerHTML = ``;\n            return isEmpty();\n        } else if (!sliceArrayBooks().length) {\n            previousButton.click();\n            destroyChildElement(paginationPagesStart);\n        } else {\n            divEl.innerHTML = renderMarkUp(sliceArrayBooks());\n            console.log(sliceArrayBooks());\n            destroyChildElement(paginationPagesStart);\n        }\n        checkingArrayBooks();\n    }\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// const arrBasketBooks = [ \n//     {\n//     _id: \"1\",\n//     title: \"Book Title 1\",\n//     author: \"Author 1\",\n//     description: \"Description 1\",\n//     list_name: \"List Name 1\",\n//     book_image: \"book-image-url-1\",\n//     amazon_product_url: \"amazon-product-url-1\",\n// },\n\n// {\n//     _id: \"2\",\n//     title: \"Book Title 2\",\n//     author: \"Author 2\",\n//     description: \"Description 2\",\n//     list_name: \"List Name 2\",\n//     book_image: \"book-image-url-2\",\n//     amazon_product_url: \"amazon-product-url-2\",\n// },\n\n// {\n//     _id: \"3\",\n//     title: \"Book Title 3\",\n//     author: \"Author 3\",\n//     description: \"Description 3\",\n//     list_name: \"List Name 3\",\n//     book_image: \"book-image-url-3\",\n//     amazon_product_url: \"amazon-product-url-3\",\n// },\n\n// {\n//     _id: \"4\",\n//     title: \"Book Title 4\",\n//     author: \"Author 4\",\n//     description: \"Description 4\",\n//     list_name: \"List Name 4\",\n//     book_image: \"book-image-url-4\",\n//     amazon_product_url: \"amazon-product-url-4\",\n// },\n// {\n//     _id: \"5\",\n//     title: \"Book Title 5\",\n//     author: \"Author 5\",\n//     description: \"Description 5\",\n//     list_name: \"List Name 5\",\n//     book_image: \"book-image-url-5\",\n//     amazon_product_url: \"amazon-product-url-5\",\n// }\n// ];\n// renderMarkUp(arrBasketBooks)\n\n//  _id,\n//                 title,\n//                 author,\n//                 description,\n//                 list_name,\n//                 book_image,\n//                 amazon_product_url,\n//     buy_links: [bookshop],\n                    \n//         {\n//   \"book_image\": \"https://storage.googleapis.com/du-prd/books/images/9780063226050.jpg\",\n//   \"title\": \"THE LOVE STORIES OF THE BIBLE SPEAK\",\n//   \"author\": \"Shannon Bream\",\n//   \"list_name\": \"Advice How-To and Miscellaneous\",\n//   \"amazon_product_url\": \"https://www.amazon.com/dp/0063226057?tag=NYTBSREV-20\",\n//   \"buy_links\": [\n//     {\n//       \"name\": \"Amazon\",\n//       \"url\": \"https://www.amazon.com/dp/0063226057?tag=NYTBSREV-20\"\n//     }\n//   ]\n// }"],"names":["getRefs","getShopIconsPaths","SHOPPING_LIST_STORAGE_KEY","shoppingList","blankBasket","divEl","previousButton","paginationPagesStart","bookShopIconPath","amazonIconPath","pageSize","currentPage","startIndex","endIndex","itemsOnPage","renderMarkUp","storageArr","_id","title","author","description","list_name","book_image","amazon_product_url","icons","isEmpty","event","BookID","bookIndex","bookInStorage"],"mappings":"qFAAe,SAAAA,GAAY,CACvB,MAAO,CAEP,MAAO,SAAS,cAAc,gBAAgB,EAC9C,SAAU,SAAS,cAAc,gBAAgB,CAEhD,CACL,CCPe,SAAAC,GAAY,CACvB,MAAO,CAGL,iBAAkB,IAAA,IAAA,izDAAA,KAAA,QAAA,EAAkD,KAEpE,eAAgB,IAAmD,IAAA,qmFAAA,KAAA,QAAA,EAAC,KAGpE,eAAgB,IAA6D,IAAA,4DAAA,KAAA,QAAA,EAAC,KAG9E,aAAc,0EACpB,CACA,CCVA,MAAMC,EAA4B,QAC5BC,EAAe,KAAK,MAAM,aAAa,QAAQD,CAAyB,CAAC,GAAK,GAC9EE,EAAc,SAAS,cAAc,eAAe,EAIpD,CAAE,MAAAC,EACJ,eAAAC,EACA,qBAAAC,CACJ,EAAMP,EAAS,EAGT,CACF,iBAAAQ,EACA,eAAAC,CAED,EAAGR,EAAiB,EAKjBS,EAAW,EACjB,IAAIC,EAAc,EACdC,GAAcD,EAAc,GAAKD,EACjCG,EAAWD,EAAaF,EACxBI,EAAcX,EAAa,MAAMS,EAAYC,CAAQ,EAEzD,SAASE,EAAaC,EAAY,CAC9B,OAAOA,EACF,IACG,CAAC,CACG,IAAAC,EACA,MAAAC,EACA,OAAAC,EACA,YAAAC,EACA,UAAAC,EACA,WAAAC,EACA,mBAAAC,CAEhB,IACuB;AAAA;AAAA;AAAA,2DAGoCD,WAAoBJ;AAAA;AAAA;AAAA;AAAA,uDAIxBA;AAAA,yDACEG;AAAA;AAAA;AAAA;AAAA,4DAIGD;AAAA;AAAA;AAAA;AAAA,uDAILD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAMZI;AAAA,+FACoDd;AAAA;AAAA;AAAA;AAAA,2CAIpDc;AAAA,kGACuDf;AAAA;AAAA;AAAA;AAAA;AAAA,gFAKlBS;AAAA,gEAChBA;AAAA,yCACvBO;AAAA;AAAA;AAAA;AAAA,iBAMhC,EACA,KAAK,EAAE,CAChB,CAEA,SAASC,GAAU,CACf,GAAI,CAACtB,EAAa,OAAQ,CACtBC,EAAY,UAAU,OAAO,cAAc,EAC/C,MACC,CACLC,EAAM,mBAAmB,YAAaU,EAAaD,CAAW,CAAC,CAC/D,CACAW,IAEApB,EAAM,iBAAiB,QAASqB,GAAS,CACrC,GAAIA,EAAM,OAAO,QAAQ,gBAAgB,EAAG,CACxC,MAAMC,EAASD,EAAM,OAAO,aAAa,cAAc,EAEjDE,EAAYzB,EAAa,UAC3B0B,GAAiBA,EAAc,MAAQF,CACnD,EASQ,GAPAxB,EAAa,OAAOyB,EAAW,CAAC,EAEhC,aAAa,QACT1B,EACA,KAAK,UAAUC,CAAY,CACvC,EAEaA,EAAa,OAGN,gBAAiB,EAAC,QAI1BE,EAAM,UAAYU,EAAa,gBAAiB,CAAA,EAChD,QAAQ,IAAI,gBAAe,CAAE,EAC7B,oBAAoBR,CAAoB,IALxCD,EAAe,MAAK,EACpB,oBAAoBC,CAAoB,OAJxC,QAAAF,EAAM,UAAY,GACXoB,EAAO,EASlB,oBACH,CACL,CAAC"}