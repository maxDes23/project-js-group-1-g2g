{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shopping-list.js"],"sourcesContent":["const SHOPPING_LIST_STORAGE_KEY = 'storage-of-books';\nconst shoppingList = JSON.parse(localStorage.getItem(SHOPPING_LIST_STORAGE_KEY)) || [];\n\nconst divEl = document.querySelector('.shop_title_list');\nconst amazonIconPath = './img/modal/amazon.png';\nconst bookShopIconPath = './img/shopping/book.png';\nconst svgTrashIcon = './img/icons.svg';\nconst blankBasket = document.querySelector('.blank-basket')\n\n\nconst pageSize = 3;\nlet totalPages = Math.ceil(shoppingList.length / pageSize);\nlet currentPage = 1;\nlet startIndex = (currentPage - 1) * pageSize;\nlet endIndex = startIndex + pageSize;\nlet itemsOnPage = shoppingList.slice(startIndex, endIndex);\n\nfunction renderMarkUp(itemsOnPage) {\n    return itemsOnPage\n        .map(\n            ({\n                _id,\n                title,\n                author,\n                description,\n                list_name,\n                book_image,\n                amazon_product_url,\n                buy_links: [bookshop],\n            }) => {\n                return `\n                <article class=\"shop_card\">\n                    <div class=\"card-img\">\n                        <img class=\"shop__card-img\" src=\"${book_image}\" alt=\"${title}\" />\n                    </div>\n\n                    <div class=\"card-title\">\n                        <h3 class=\"shop__book-title\">${title}</h3>\n                        <p class=\"shop__book-category\">${list_name}</p>\n                    </div>\n\n                    <div class=\"card-description\">\n                        <p class=\"shop__book-description\">${description}</p>\n                    </div>\n\n                    <div class=\"card-author\">\n                        <p class=\"shop__book-author\">${author}</p>\n                    </div>\n\n                    <div class=\"card-shoplist\">\n                        <ul class=\"shop__book-shoplist\">\n                            <li class=\"store\">\n                                <a href=\"${amazon_product_url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"Amazon link\">\n                                    <img class=\"modal-shop-img shopping-shopimg amazon\" src=\"${amazonIconPath}\" alt=\"Amazon link\" alt=\"Amazon live page\"/>\n                                </a>\n                            </li>\n                            <li class=\"store\">\n                                <a href=\"${bookshop.url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\" aria-label=\"BookShop link\">\n                                    <img class=\"modal-shop-img shopping-shopimg book-shop\" src=\"${bookShopIconPath}\" alt=\"BookShop link\" />\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                    <button class=\"shop_card-btn\" type=\"button\" data-book-id=\"${_id}\" aria-label=\"Remove book from shopping list\">\n                        <svg class=\"trash-icon\" data-book-id=\"${_id}\" width=\"17\" height=\"17\">\n                            <use href=\"${svgTrashIcon}#trash-icon\"></use>\n                        </svg>\n                    </button>\n                </article>\n                `;\n            }\n        )\n        .join('');\n}\n\nfunction isEmpty() {\n    if (!shoppingList.length) {\n        return;\n    }\n    blankBasket.classList.add('display-none')\n\n    divEl.insertAdjacentHTML('beforeend', renderMarkUp(itemsOnPage));\n}\n\nisEmpty();\n\ndivEl.addEventListener('click', event => {\n    if (event.target.closest('.shop_card-btn')) {\n        const BookID = event.target.getAttribute('data-book-id');\n\n        const bookIndex = shoppingList.findIndex(\n            bookInStorage => bookInStorage._id === BookID\n        );\n\n        shoppingList.splice(bookIndex, 1);\n\n        localStorage.setItem(\n            SHOPPING_LIST_STORAGE_KEY,\n            JSON.stringify(shoppingList)\n        );\n\n        if (!shoppingList.length) {\n            isEmpty();\n            return;\n        } else if (!sliceArrayBooks().length) {\n            previousButton.click();\n            destroyChildElement(paginationPagesStart);\n        } else {\n            divEl.innerHTML = renderMarkUp(sliceArrayBooks());\n            console.log(sliceArrayBooks());\n            destroyChildElement(paginationPagesStart);\n        }\n        checkingArrayBooks();\n    }\n});\n\n"],"names":["SHOPPING_LIST_STORAGE_KEY","shoppingList","divEl","amazonIconPath","bookShopIconPath","svgTrashIcon","blankBasket","pageSize","currentPage","startIndex","endIndex","itemsOnPage","renderMarkUp","_id","title","author","description","list_name","book_image","amazon_product_url","bookshop","isEmpty","event","BookID","bookIndex","bookInStorage"],"mappings":"yEAAA,MAAMA,EAA4B,mBAC5BC,EAAe,KAAK,MAAM,aAAa,QAAQD,CAAyB,CAAC,GAAK,GAE9EE,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAiB,yBACjBC,EAAmB,0BACnBC,EAAe,kBACfC,EAAc,SAAS,cAAc,eAAe,EAGpDC,EAAW,EACA,KAAK,KAAKN,EAAa,OAASM,CAAQ,EACzD,IAAIC,EAAc,EACdC,GAAcD,EAAc,GAAKD,EACjCG,EAAWD,EAAaF,EACxBI,EAAcV,EAAa,MAAMQ,EAAYC,CAAQ,EAEzD,SAASE,EAAaD,EAAa,CAC/B,OAAOA,EACF,IACG,CAAC,CACG,IAAAE,EACA,MAAAC,EACA,OAAAC,EACA,YAAAC,EACA,UAAAC,EACA,WAAAC,EACA,mBAAAC,EACA,UAAW,CAACC,CAAQ,CACpC,IACuB;AAAA;AAAA;AAAA,2DAGoCF,WAAoBJ;AAAA;AAAA;AAAA;AAAA,uDAIxBA;AAAA,yDACEG;AAAA;AAAA;AAAA;AAAA,4DAIGD;AAAA;AAAA;AAAA;AAAA,uDAILD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAMZI;AAAA,+FACoDhB;AAAA;AAAA;AAAA;AAAA,2CAIpDiB,EAAS;AAAA,kGAC8ChB;AAAA;AAAA;AAAA;AAAA;AAAA,gFAKlBS;AAAA,gEAChBA;AAAA,yCACvBR;AAAA;AAAA;AAAA;AAAA,iBAMhC,EACA,KAAK,EAAE,CAChB,CAEA,SAASgB,GAAU,CACVpB,EAAa,SAGlBK,EAAY,UAAU,IAAI,cAAc,EAExCJ,EAAM,mBAAmB,YAAaU,EAAaD,CAAW,CAAC,EACnE,CAEAU,IAEAnB,EAAM,iBAAiB,QAASoB,GAAS,CACrC,GAAIA,EAAM,OAAO,QAAQ,gBAAgB,EAAG,CACxC,MAAMC,EAASD,EAAM,OAAO,aAAa,cAAc,EAEjDE,EAAYvB,EAAa,UAC3BwB,GAAiBA,EAAc,MAAQF,CACnD,EASQ,GAPAtB,EAAa,OAAOuB,EAAW,CAAC,EAEhC,aAAa,QACTxB,EACA,KAAK,UAAUC,CAAY,CACvC,EAEaA,EAAa,OAGN,gBAAiB,EAAC,QAI1BC,EAAM,UAAYU,EAAa,gBAAiB,CAAA,EAChD,QAAQ,IAAI,gBAAe,CAAE,EAC7B,oBAAoB,oBAAoB,IALxC,eAAe,MAAK,EACpB,oBAAoB,oBAAoB,OALlB,CACtBS,IACA,MACZ,CAQQ,oBACH,CACL,CAAC"}