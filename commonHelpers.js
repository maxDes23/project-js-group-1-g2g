import{g as L}from"./assets/support-f2eb135e.js";import{a as p,i as M,g as _,c as $,s as T,b as U,o as G}from"./assets/vendor-ddb081ef.js";p.defaults.baseURL="https://books-backend.p.goit.global/books/";async function D(){return await p.get("category-list")}async function O(){return await p.get("top-books")}async function P(e){return await p.get(`category?category=${e}`)}async function H(e){return await p.get(`${e}`)}document.addEventListener("DOMContentLoaded",async function(){const e=await D(),{data:t}=e;j(t)});function j(e){const t=document.querySelector(".categories"),n=e.map(o=>{const{list_name:a}=o;return`
        <li><a class='categories_item' href='#' id='_${a}'>${a}</a></li>
        `}).join("");t.insertAdjacentHTML("beforeend",n),[...document.getElementsByClassName("categories_item")].forEach(o=>o.addEventListener("click",()=>{document.querySelector(".active_category").classList.remove("active_category"),o.classList.add("active_category")}))}const m=document.querySelector(".backdrop"),y=document.querySelector("body");async function z(e){try{const{book_image:t,title:n,author:s,description:o,amazon_product_url:a,buy_links:[c]}=e,d=document.querySelector(".modal");m.style.display="inline",d.innerHTML="";const E=[`<button class="modal-close-button"><svg
    class="modal__cross"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
  >
    <path
      d="M23.954 21.03l-9.184-9.095 9.092-9.174-2.832-2.807-9.09 9.179-9.176-9.088-2.81 2.81 9.186 9.105-9.095 9.184 2.81 2.81 9.112-9.192 9.18 9.1z"
    />
  </svg></button>`,'<div class="modal-ipad">',`<img src="${t}" class="modal-image">`,'<div class="modal-ipad-overlay-text">',`<h2 class="modal__title">${n}</h2>`,`<p class="modal-title-name">Author: ${s}</p>`,`<p class="modal-title-text"> ${o} </p>`,`<div class="book-links">
        <a href="${a}" class="modal-link-amazon">
          <img src="../img/modal/amazon.png" alt="">
        </a>
        <a href="${c}" class="modal-link">
          <img src="../img/modal/book.png" alt="">
        </a>
        </div>`,"</div>","</div>",'<button class="modal-button-add">Add to shopping list</button>'];d.innerHTML=E.join("");const r=document.querySelector(".modal-button-add");r.setAttribute("id","1"),r.addEventListener("click",()=>{const u={book_image:t,title:n,author:s,description:o,amazon_product_url:a,buy_links:[c]};if(r.getAttribute("id")==="1"){const i=JSON.parse(localStorage.getItem("books"))||[];i.push(u),localStorage.setItem("books",JSON.stringify(i)),r.setAttribute("id","2"),r.textContent="Remove from shopping list",L()}else if(r.getAttribute("id")==="2"){const i=u.title,x=(JSON.parse(localStorage.getItem("books"))||[]).filter(N=>N.title!==i);localStorage.setItem("books",JSON.stringify(x)),r.setAttribute("id","1"),L(),r.textContent="Add to shopping list"}}),document.addEventListener("keydown",u=>{if(u.key==="Escape"){const i=document.querySelector(".modal");i.classList.contains("active")&&(i.classList.remove("active"),m.style.display="none",y.classList.remove("modal-open"))}}),m.addEventListener("click",u=>{const i=document.querySelector(".modal");i.contains(u.target)||(i.classList.remove("active"),m.style.display="none",y.classList.remove("modal-open"))}),document.querySelector(".modal-close-button").addEventListener("click",()=>{d.classList.remove("active"),m.style.display="none",y.classList.remove("modal-open")}),d.classList.add("active")}catch(t){console.log(t)}}function W(){document.querySelector(".category-container").addEventListener("click",Y)}async function Y(e){const t=e.target.closest(".book");if(!t)return;const n=t.id;y.classList.add("modal-open");const s=await H(n);z(s.data)}document.addEventListener("DOMContentLoaded",C);async function C(){const e=await O(),{data:t}=e;await J(t),F(),W()}function B(e){return document.querySelector(".books-container"),e.map(n=>{const{_id:s,book_image:o,title:a,author:c}=n;return`
      <li class="book" id="${s}">
        <div class="book-picture">
          <img src="${o}" class="book-img" alt="${a}" />
        </div>
        <p class="book-title">${a}</p>
        <p class="book-author">${c}</p> 
      </li>
            `}).join("")}async function J(e){const t=document.querySelector(".category-container"),n=e.map(s=>{const o=s.books,a=B(o),c=s.list_name;return`
       <div class="${c.replaceAll(" ","_")} book-card">
          <p class="category-description" id="category">
            ${c}
          </p>
          <ul class="books-container"> ${a} </ul>
          <div class="button-wrapper">
            <button class="btn-load-more" type="button" id="${c}">SEE MORE</button>
          </div>
         </div> 
      `}).join("");t.insertAdjacentHTML("beforeend",n),R()}function R(){document.querySelectorAll(".btn-load-more").forEach(t=>{t.addEventListener("click",q)})}function F(){document.querySelectorAll(".categories_item").forEach(t=>{t.addEventListener("click",q)})}async function q(e){e.preventDefault();const t=document.querySelector(".category-container");t.innerHTML="";let n=e.target.id;n[0]==="_"&&(n=n.substring(1));let s=n.split(" "),o="",a="";s.length>1?(o=s.pop(),a=s.join(" ")):a=n;const c=document.querySelector(".category-title");e.target.innerHTML=="All Categories"?c.innerHTML="Best Sellers <span>Books</span>":c.innerHTML=`${a} <span>${o}</span>`;try{n===""?await C():await Q(n)}catch(d){console.log(d)}}async function Q(e){const t=document.querySelector(".category-container"),n=await P(e),o=`
      <ul class="books-container show-more"> ${B(n.data)} </ul>
    `;t.insertAdjacentHTML("beforeend",o)}const K=M({apiKey:"AIzaSyDQugW-CaYBrWSvO2DN6FwPpw05I7D6tAM",authDomain:"bookshelf-b1d96.firebaseapp.com",databaseURL:"https://bookshelf-b1d96-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bookshelf-b1d96",storageBucket:"bookshelf-b1d96.appspot.com",messagingSenderId:"179300012730",appId:"1:179300012730:web:aa4a508d0a2ffec4c3a883",measurementId:"G-4M8036172T"}),b=_(K),g=document.querySelector("#name"),V=document.querySelector(".sign-up-form"),l=document.querySelector(".sign-up-btn"),k=document.querySelector(".sign-in-btn"),X=document.querySelector(".log-out-btn"),v=document.querySelector("#authorization"),Z=document.querySelector(".sign-up-btn-text"),S=document.querySelector(".sign-up-btn-text"),f=document.querySelector(".sign-up-mobile"),h=document.querySelector(".mobile-nav"),w=document.querySelector(".mobile-logout-div"),I=document.querySelector(".user-block");V.addEventListener("submit",oe);k.addEventListener("click",ne);Z.addEventListener("click",ee);X.addEventListener("click",A);f.addEventListener("click",te);g.hasAttribute("required")||g.setAttribute("required");l.textContent="SIGN UP";k.textContent="SIGN IN";f.classList.add("display-none");function ee(e){if(e.preventDefault(),S.textContent==="Log out"){A();return}v.classList.remove("display-none")}function te(e){e.preventDefault(),v.classList.remove("display-none")}async function oe(e){if(e.preventDefault(),l.textContent==="SIGN UP"){const t=e.target,n=t.elements.email.value,s=t.elements.password.value;if(s.length<6){alert("Password should be at least 6 characters!");return}$(b,n,s).then(o=>{const a=o.user;console.log(a),alert("Your account has been created!"),t.reset()}).catch(o=>{console.log(o.code+o.message),alert("This email address is already in use on Bookshelf. Please sign in!"),t.reset()})}if(l.textContent==="SIGN IN"){const t=e.target,n=t.elements.email.value,s=t.elements.password.value;T(b,n,s).then(o=>{o.user,alert("You have signed in successfully!"),v.classList.add("display-none"),t.reset()}).catch(o=>{console.log(o.code+o.message),alert("The email address or password is incorrect. Try again!"),t.reset()})}}async function ne(e){if(e.preventDefault(),l.textContent==="SIGN IN"){g.classList.remove("display-none"),l.textContent="SIGN UP",k.textContent="SIGN IN";return}if(l.textContent==="SIGN UP"){g.removeAttribute("required"),g.classList.add("display-none"),l.textContent="SIGN IN",k.textContent="SIGN UP";return}}async function se(){G(b,e=>{e?(v.classList.add("display-none"),S.textContent="Log out",f.classList.add("display-none"),h.classList.remove("display-none"),w.classList.remove("display-none"),I.classList.remove("display-none")):(S.textContent="Sign up",f.classList.remove("display-none"),h.classList.add("display-none"),w.classList.add("display-none"),I.classList.add("display-none"))})}async function A(){await U(b),alert("You have successfully logged out!")}se();(()=>{window.addEventListener("scroll",function(){var t=document.getElementById("scroll-up");t&&(t.style.visibility=window.scrollY>1e3?"visible":"hidden")}),document.querySelector("#scroll-up").addEventListener("click",e);function e(){window.scrollTo({top:0,behavior:"smooth"})}})();
//# sourceMappingURL=commonHelpers.js.map
